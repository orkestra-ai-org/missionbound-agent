# MissionBound Agent — Configuration Railway v2.0
# Ajout: volume persistant pour mémoire agent

name = "missionbound-agent"

[build]
builder = "DOCKERFILE"
dockerfilePath = "Dockerfile"

[deploy]
startCommand = "/entrypoint.sh"
# Le script démarre le gateway avec la config complète
# Healthcheck désactivé: node-llama-cpp compile au démarrage (>30s)
# Railway vérifie que le processus tourne (suffisant pour notre usage)
# healthcheckPath = "/health"
# healthcheckTimeout = 300
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

[deploy.resources]
cpu = "1x"
memory = "512MB"

# Volume persistant pour mémoire agent (CRITIQUE — sans ceci, mémoire perdue au restart)
[deploy.volumes]
memory = "/data"

[env]
AGENT_ID = "missionbound-growth"
OPENCLAW_PORT = "8080"
NODE_ENV = "production"
OPENCLAW_GATEWAY_TOKEN = "missionbound-token-2026"
# Clés API - définies manuellement dans Railway Dashboard
